<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vibe Gamer — Settings</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: transparent;
      font-family: var(--font);
    }

    .settings-panel {
      width: calc(100vw - 16px);
      height: calc(100vh - 16px);
      margin: 8px;
      display: flex;
      flex-direction: column;
    }

    .panel-body {
      padding: 0 24px 20px;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow-y: auto;
    }

    .panel-body::-webkit-scrollbar { width: 5px; }
    .panel-body::-webkit-scrollbar-track { background: transparent; }
    .panel-body::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.08);
      border-radius: 3px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .key-row {
      display: flex;
      gap: 8px;
      align-items: stretch;
    }

    .key-row .input-field { flex: 1; }

    .show-btn {
      padding: 0 14px;
      font-size: 11px;
      border-radius: var(--radius-sm);
      white-space: nowrap;
    }

    .save-row {
      padding-top: 8px;
    }

    .save-row .btn {
      width: 100%;
      padding: 14px;
      font-size: 15px;
      border-radius: var(--radius-md);
    }

    .contrast-preview {
      display: flex;
      border-radius: 8px;
      overflow: hidden;
      height: 32px;
      border: 1px solid var(--border-subtle);
    }

    .contrast-preview .cp-dark,
    .contrast-preview .cp-light {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="settings-panel glass-panel rainbow-border">
    <div class="title-bar">
      <h1>Settings</h1>
      <button class="close-btn" id="closeBtn">✕</button>
    </div>

    <div class="panel-body">
      <!-- Vision model section -->
      <div class="section-title">Vision Model</div>

      <div class="toggle-row" id="localToggle">
        <div class="toggle active" id="localToggleSwitch"></div>
        <span class="toggle-label">Use local Qwen3-VL-8B (free, no key)</span>
      </div>

      <div class="spacer"></div>

      <div class="field-group">
        <span class="label">DashScope API Key</span>
        <div class="key-row">
          <input type="password" class="input-field" id="apiKeyInput"
                 placeholder="sk-..." spellcheck="false" autocomplete="off">
          <button class="btn btn-ghost show-btn" id="showKeyBtn">Show</button>
        </div>
      </div>

      <div class="field-group">
        <span class="label">Model</span>
        <select class="input-field" id="modelSelect">
          <option value="qwen-vl-max">qwen-vl-max</option>
          <option value="qwen-vl-plus">qwen-vl-plus</option>
          <option value="qwen2-vl-72b-instruct">qwen2-vl-72b-instruct</option>
          <option value="qwen2-vl-7b-instruct">qwen2-vl-7b-instruct</option>
        </select>
      </div>

      <div class="divider"></div>

      <!-- Chess section -->
      <div class="section-title">Chess Agent</div>

      <div class="field-group">
        <span class="label">YOLO Confidence</span>
        <div class="slider-container">
          <input type="range" id="confSlider" min="0.10" max="0.95" step="0.05" value="0.30">
          <span class="slider-value" id="confValue">0.30</span>
        </div>
      </div>

      <div class="field-group">
        <span class="label">Stockfish Depth</span>
        <div class="slider-container">
          <input type="range" id="depthSlider" min="5" max="25" step="1" value="18">
          <span class="slider-value" id="depthValue">18</span>
        </div>
      </div>

      <div class="field-group">
        <span class="label">Scan Interval (s)</span>
        <div class="slider-container">
          <input type="range" id="intervalSlider" min="1.0" max="15.0" step="0.5" value="3.0">
          <span class="slider-value" id="intervalValue">3.0</span>
        </div>
      </div>

      <div class="field-group">
        <span class="label">Click Delay (s)</span>
        <div class="slider-container">
          <input type="range" id="clickDelaySlider" min="0.05" max="1.0" step="0.05" value="0.15">
          <span class="slider-value" id="clickDelayValue">0.15</span>
        </div>
      </div>

      <div class="divider"></div>

      <!-- Accessibility -->
      <div class="section-title">Accessibility</div>

      <div class="field-group">
        <span class="label">Display Contrast</span>
        <div class="slider-container">
          <input type="range" id="contrastSlider" min="0" max="100" step="1" value="50">
          <span class="slider-value" id="contrastValue">50%</span>
        </div>
        <div class="contrast-preview" id="contrastPreview">
          <div class="cp-dark">Aa Dark</div>
          <div class="cp-light">Aa Light</div>
        </div>
      </div>

      <div class="spacer-lg"></div>

      <div class="save-row">
        <button class="btn btn-primary" id="saveBtn">Save</button>
      </div>
    </div>
  </div>

  <script src="settings.js"></script>
</body>
</html>
